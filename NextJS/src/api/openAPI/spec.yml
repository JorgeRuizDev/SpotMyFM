openapi: 3.0.0
info:
  title: SpotMyFM Api Specification
  description: The SpotMyFM OpenAPI Swagger Specification
  version: 0.1.9
tags:
  - name: lastFM
    description: LastFM Related Operations
  - name: spotify
    description: Spotify Related Operations
  - name: auth
    description: Authentication related Operations
  - name: data
    description: Database Related Operations
  - name: predictor
    description: Machine Learning Model related Operations
servers:
  - url: https://dev.spotmyfm.jorgeruizdev.com/api
    description: "Development Server"
  - url: https://spotmyfm.jorgeruizdev.com/api
    description: "Production Server"
paths:
  /lastFM/getBulkAlbumTags:
    post:
      summary: Gets album tags of given album names and artists
      description: The endpoint only alllows a maximum of 50 pairs artist-album per request.
      requestBody:
        description: A bunch of albums and artists. Each album has a Name, Artist name and ID, the ID is the response identifier, it must be unique
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LastFMTagReq"

      responses:
        "200":
          description: A successful operation.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LastFMTagResponse"

        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: "Not Authorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      tags:
        - lastFM
      security:
        - jwt: []

components:
  schemas:
    Error:
      type: object
      properties:
        error:
          type: string

    LastFMTagReq:
      type: object
      required:
        - albums
      properties:
        albums:
          type: array
          items:
            type: object
            properties:
              album_name:
                type: string
              artist_name:
                type: string
              album_id:
                type: string

    LastFMTagResponse:
      type: object
      required:
        - album_tags
      properties:
        album_tags:
          type: array
          items:
            $ref: "#/components/schemas/LastFMTag"

    LastFMTag:
      type: object
      properties:
        album_id:
          type: string
        tags:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              url:
                type: string

  securitySchemes:
    jwt:
      type: http
      scheme: bearer
      bearerFormat: JWT
